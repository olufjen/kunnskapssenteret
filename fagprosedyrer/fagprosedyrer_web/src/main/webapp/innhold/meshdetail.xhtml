<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:t="http://myfaces.apache.org/tomahawk"
     	xmlns:rich="http://richfaces.org/rich" >
     	
<h:head>
	<title>Norske MeSH Medical subject headings</title>    
</h:head>

<h:body>

	<ui:composition template="/templates/emok/commonLayout.xhtml">
	
	<ui:define name="content">
	<h:form class="ym-form" id="introduction-form">
	  <div class="ym-column">
	    
      <div class="ym-col1">      
				<div class="ym-cbox elmersteps">
					<!-- <ul class="ym-vlist">
					<li class="active nonTransparent">Innledning</li>
					<li><a href ="spring/main">Hvor/Når/Hvem</a></li>    
			 		<li class="active nonTransparent">Hendelse</li>
			 		<li class="active nonTransparent">Diskusjon</li>
			 		<li class="active nonTransparent">Kontaktinformasjon</li>
					
					</ul> -->
				
					<ul class="ym-vlist">
					<h:panelGrid columns="2">
						<h:panelGroup>
						<h:inputTextarea id="incident" cols="20" rows="1"
								value="#{meshTree.searchNode}" />
						</h:panelGroup>
						<h:panelGroup>		
								<h:inputHidden id="hendelseHidden"
								valueChangeListener="#{tableWebService.hendelseHiddenValue}" />
							<h:commandButton value="Søk" action="#{tableWebService.getSearch()}"></h:commandButton>
						</h:panelGroup>
					</h:panelGrid>
				</ul>		
		<t:dataTable  id="treliste"
		
		 rows="#{meshTree.noofNodes}"
			var="node" value="#{meshTree.trees}">

			<h:column id="kursdateheader">
				<f:facet name="header">
					<h:outputText id="prefheader" value="Hovedtermer"></h:outputText>
				</f:facet>
				 <h:commandLink id="treelink" action="#{tableWebService.getToptreeDetail}" >
					<h:outputText id="base" value="#{node.baseName}"></h:outputText>
					<f:param value="#{node.baseName}" name="treeName"></f:param>
  	  			</h:commandLink>
			</h:column>
	
			
		</t:dataTable>
					
	<h:panelGrid columns="2" width="100%" columnClasses="ym-vlist">
	
	<t:dataScroller id="scroll_2" for="treliste" fastStep="10"
		pageCountVar="pageCount" pageIndexVar="pageIndex"
		styleClass="scroller" paginator="true" paginatorMaxPages="9"
		paginatorTableClass="paginator"
		paginatorActiveColumnStyle="font-weight:bold;" immediate="true">
		<f:facet name="first">
			<h:graphicImage  name="arrow-first.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="last">
			<h:graphicImage name="arrow-last.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="previous">
			<h:graphicImage name="arrow-previous.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="next">
			<h:graphicImage  name="arrow-next.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="fastforward">
			<h:graphicImage name="arrow-ff.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="fastrewind">
			<h:graphicImage name="arrow-fr.gif" library="images" border="1" />
		</f:facet>
	</t:dataScroller>		
			
				
	<!-- 			
				 
					<t:tree2 id="meshTree" value="modelTree" var="node" varNodeToggler="t">
					<f:facet name="top">
						<h:panelGroup>
        					<h:outputText value="#{node.description}"></h:outputText>
        				</h:panelGroup>
					
					</f:facet>
					
					
					</t:tree2>
					
	 -->				
	</h:panelGrid>	
					
				</div>					
			</div>	    
	    
      <div class="ym-col2">
        <div class="ym-cbox helparea" style="display:block;opacity:1;">
          <div class="circle">?</div>
          <p>I denne ruten vil det dukke opp informasjon dersom du trykker på symbolet&#160;<h:graphicImage name="helpicon2.png" library="images" alt="hjelp" title="Hjelp" /> ved siden av et spørsmål.</p>
        </div>
      </div> 
	    
      <div class="ym-col3">
        <div class="ym-cbox">
        	
        	
         		<div class="ym-grid">
	          	<div class="ym-g50 ym-gl">
	            	<div class="ym-gbox ym-fbox-text">
	    <h2>	<h:outputText id="treechosen" value="Valgt hovedterm"></h:outputText></h2>
  		<t:dataTable  id="meshliste"
		
		 rows="#{meshTree.noofNodes}"
			var="treenode" value="#{meshTree.chosenTree.hiveConcepts}">

			<h:column id="hivedetail">
				<f:facet name="header">
					<h:outputText id="prefhiveheader" value="#{meshTree.chosenTree.baseName}"></h:outputText>
				</f:facet>
				 <h:commandLink id="hivelink" action="#{tableWebService.getmeshDetail}" >
					<h:outputText id="pref" value="#{treenode.prefLabel}"></h:outputText>
					<f:param value="#{treenode.qname.namespaceURI}" name="qnameid"></f:param>
  	  			</h:commandLink>
			</h:column>
	
			
		</t:dataTable>
					
	<h:panelGrid columns="2" width="100%" columnClasses="ym-vlist">
	
	<t:dataScroller id="scroll_1" for="meshliste" fastStep="10"
		pageCountVar="pageCount" pageIndexVar="pageIndex"
		styleClass="scroller" paginator="true" paginatorMaxPages="9"
		paginatorTableClass="paginator"
		paginatorActiveColumnStyle="font-weight:bold;" immediate="true">
		<f:facet name="first">
			<h:graphicImage  name="arrow-first.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="last">
			<h:graphicImage name="arrow-last.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="previous">
			<h:graphicImage name="arrow-previous.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="next">
			<h:graphicImage  name="arrow-next.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="fastforward">
			<h:graphicImage name="arrow-ff.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="fastrewind">
			<h:graphicImage name="arrow-fr.gif" library="images" border="1" />
		</f:facet>
	</t:dataScroller>	    
	</h:panelGrid>	  
           </div>
          </div>
     <h:panelGroup rendered="#{meshTree.conceptDetail}" >	
              <div class="ym-g50 ym-gr">
	            	<div class="ym-gbox ym-fbox-text">
	              	<h2><h:outputText id="chosen" value="#{meshTree.chosenConcept.prefLabel}"></h:outputText></h2>
		            <p><h:outputText id="notes" value="#{meshTree.chosenConcept.scopeNotes}"></h:outputText></p> 
	                <p><h2>Alternativ benevning</h2> <h:outputText id="altlabels" value="#{meshTree.chosenConcept.altLabels}"></h:outputText></p>
	           
	         		</div>
	    <h:panelGrid columns="2" width="100%">  
	     <h:panelGroup>  		
	    <h:commandButton value="Underordnede termer" action="#{tableWebService.presentNarrow()}"></h:commandButton>
	    </h:panelGroup>
	     <h:panelGroup>  		
	    <h:commandButton value="Overordnede termer" action="#{tableWebService.presentBroader()}"></h:commandButton>
	     </h:panelGroup>
	     </h:panelGrid>
	   <h:panelGroup rendered="#{meshTree.narrow}" >
	  	<t:dataTable  id="narrowliste"
		 rows="#{meshTree.noofNodes-5}"
			var="narrownode" value="#{meshTree.narrowConcepts}">

			<h:column id="hivedetail">
				<f:facet name="header">
					<h:outputText id="narrowhiveheader" value="Underordnede begreper"></h:outputText>
				</f:facet>
				 <h:commandLink id="hivelink" action="#{tableWebService.getmeshDetail}" >
					<h:outputText id="narrowpref" value="#{narrownode.prefLabel}"></h:outputText>
					<f:param value="#{narrownode}" name="narrowid"></f:param>
  	  			</h:commandLink>
			</h:column>
	
			
		</t:dataTable>  
	<h:panelGrid columns="2" width="100%" columnClasses="ym-vlist">
	
	<t:dataScroller id="scroll_3" for="narrowliste" fastStep="10"
		pageCountVar="pageCount" pageIndexVar="pageIndex"
		styleClass="scroller" paginator="true" paginatorMaxPages="9"
		paginatorTableClass="paginator"
		paginatorActiveColumnStyle="font-weight:bold;" immediate="true">
		<f:facet name="first">
			<h:graphicImage  name="arrow-first.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="last">
			<h:graphicImage name="arrow-last.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="previous">
			<h:graphicImage name="arrow-previous.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="next">
			<h:graphicImage  name="arrow-next.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="fastforward">
			<h:graphicImage name="arrow-ff.gif" library="images" border="1" />
		</f:facet>
		<f:facet name="fastrewind">
			<h:graphicImage name="arrow-fr.gif" library="images" border="1" />
		</f:facet>
	</t:dataScroller>	    
	</h:panelGrid>	 		
	</h:panelGroup> 
	
	<h:panelGroup rendered="#{meshTree.broaderText}">
		<h:outputText id="termtext" value="#{meshTree.broaderMessage}"></h:outputText>
	
	</h:panelGroup>
	           
	          </div>
	 </h:panelGroup>   
	      </div>  <!-- / ym-grid -->
	                
	        	<div class="buttons">
<!--  hvorHvemPageUten byttes ut med hvorHvemPage for å få tilbake søkefunksjon for sykehus  -->
	              <h:commandButton 
	              action="#{tableWebService.hvorHvemPage}" id="btnInnledning" class="replacement-neste" 
	              style="width:90px; height:40px; cursor: pointer;" value="" />
       			</div>
          
        </div>
      </div>			
					
    </div>
    </h:form>
	</ui:define> 
</ui:composition>
</h:body>
</html> 