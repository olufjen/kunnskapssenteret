<?xml version="1.0" encoding="UTF-8"?>
<sqlMap namespace="Organization">
	<typeAlias alias="organization" type="no.helsebiblioteket.admin.domain.Organization"/>
	<select id="getOrganizationById" resultClass="organization" parameterClass="integer">
		select *
		from tlb_org_unit_id
		where org_unit_id = #organizationId#;
	</select>
	<select id="getOrganizationList" resultClass="organization">
		select *
		from tlb_org_unit_id;
	</select>
	<insert id="insertOrganization" parameterClass="organization">
		insert into tbl_org_unit 
		(org_unit_id, description, last_changed) 
		values 
		(#id, #description#, now());
		<selectKey resultClass="int" type="pre" >
			SELECT nextval('tbl_org_unit_org_unit_id_seq') as id;
		</selectKey>
	</insert>
	<update id="updateOrganization" parameterClass="organization">
		update organization set
      	descr = #description#,
      	last_changed = now();
    	where org_unit_id = #id# and
    	last_changed = #lastChanged#;
  </update>
</sqlMap>