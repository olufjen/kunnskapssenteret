<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Rapporter hendelse - Hemovigilans</title>
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="http://newwindow.no/ks/nokc-0.1.7/css/fonts/font-source-sans-pro.css"/>
	<link rel="stylesheet" href="http://newwindow.no/ks/nokc-0.1.7/css/vendor/bootstrap.min.css"/>
	<!-- <link rel="stylesheet" href="http://newwindow.no/ks/nokc-0.1.7/css/defaults.css"/> -->
	<link rel="stylesheet" href="http://newwindow.no/ks/nokc-0.1.7/css/page.css"/>
	<link rel="stylesheet" href="http://newwindow.no/ks/nokc-0.1.7/css/components.css"/>	
	<link rel="stylesheet" href="http://newwindow.no/ks/nokc-0.1.7/css/custom.css"/>

<!--<link rel="stylesheet" href="css/bootstrap.css">-->

</head>

<body>
 <header class="master-header" role="navation">
      <div class="container">
        <!-- synlig header -->
        <div class="row">
          <div class="col-xs-9 col-sm-6 col-sm-push-3 col-vertical-bottom-sm logo-container">
            <div class="bottom">
              <a class="home" href="#" id="home" rel="home" title="">
                <img class="logo" src="http://newwindow.no/ks/nokc-0.1.7/img/ks-logo.png" alt="" />
              </a>
            </div>
          </div>
          <div class="hidden-xs col-sm-3 col-sm-push-3 col-vertical-bottom-sm">
            <div class="bottom">
              <span class="nkfh">Nasjonalt kunnskapssenter<br />for helsetjenesten</span>
            </div>
          </div>
          <div class="col-xs-3 col-sm-pull-9 col-vertical-bottom-sm">
            <div class="bottom">
              <button type="button" class="btn-master-menu" data-toggle="collapse" data-target=".master-menu">
                <!-- <button type="button" class="btn-master-menu"> -->
                <span class="sr-only">Åpne eller lukke meny.</span>
                <span class="text hidden-xs">Meny</span>
                <div class="bar-box">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </div>
              </button>
              <ul class="list-inline english-aa hidden-xs">
                <li class="english">
                  <a href="#" id="english" title="">English</a></li><li class="aa">
                  <a href="#">
                    <span class="small">A </span>
                    <span class="medium">A</span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </header>


<div class="container">
<form id="rapport" action="?method=PUT" method="post"> 
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> -->  
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript">
var Spinner1;
var foo;
function toggleDisplay(id, displayvalue)
{    
//	 alert("step 1 "+displayvalue);
    if ( displayvalue == 1 ) {
         document.getElementById(id).style.display = 'block';
//         alert("step 2");
    } else if (displayvalue == 0) {
         document.getElementById(id).style.display = 'none';
    //     alert("step 3");
    }
 //   alert("step 4");
}
function initialize()
{
    var SpinnerValue_Changed = function() {
       alert("event captured");
    };
   
    Spinner1 = document.getElementById("p-blod-erytrocytt");
    foo = document.getElementById("foo");
    alert("step 1");
    foo.hidden ="false";
  //  Spinner1.addEventListener("change", SpinnerValue_Changed, false);
    alert("step 2");
}

function GetLoginInfo()
{
	var epost = document.getElementById("k-epost").value;
	$.ajax({
	type: "POST",
	url: "melder/saveToMelder",
	data: "{'parameter:'epost}",
	contentType: "application/json; charset=utf-8",
	dataType: "json",
	async: true,
	cache: false,
	});
}

function formSubmit(){
	
	
	$("#btnKontak").click();
	
	/* var username=$('#k-epost').val();
	alert(username);
 	$.get('/biovigilans_web/restapi/hemovigilans/TestAjax.html',{user:username},function(responseText) { 
         $('#btnClk').text(responseText);         
     }); */
	}
function regionValgt(){
	var region = document.getElementById("k-helseregion").value;
//	alert("Region valgt: "+region);
	$("#btnRegion").click();
}
function foretakValgt(){
	var foretak = document.getElementById("k-helseforetak").value;
//	 alert("Helseforetak valgt:"+foretak);
	 if (foretak == ''){
//		 alert("foretak er tomt");
	 }

	 if (foretak != ''){
//		 alert("foretak er ikke tomt ");
		 $("#btnForetak").click();
	 }
	
}
function leveranseValgt(){
	$("#btnleveranse").click();
//	 alert("Leveranse valgt");
	//document.location("leveranse.html");
	$("#btnleveranseb").click();
}
function homePage(){
	var curAddr = document.location.href;
//	 alert(curAddr);
	var newAddr = curAddr.replace("rapporter_kontakt.html","");
//	alert(newAddr);
	document.location = newAddr;

}
//window.onload=initialize();
</script>

<h1>Rapporter hendelse–Hemovigilans</h1>
<!-- Nav tabs -->
<ul class="nav nav-tabs">
  <li ><a href="rapporter_hendelse_main.html" data-toggle="tab">Meld fra om</a></li>
  <li class="active"><a href="#kontakt1" data-toggle="tab">Kontaktinformasjon</a></li>
  <!-- 
  <li><a href="rapporter_giver.html" data-toggle="tab">Komplikasjoner ved tapping av blodgivere</a></li>
  <li><a href="rapporter_transfusjon.html"  data-toggle="tab">Transfusjonskomplikasjoner</a></li>
  <li><a href="rapporter_andrehendelser.html" data-toggle="tab">Andre uønskede hendelser</a></li>
   -->
</ul>
 <div class="radio">
          <label>
            <input name="k-anonym" type="radio" id="k-anonym" value="k-anonym" onclick="toggleDisplay('kontakt1',0);toggleDisplay('anonymbutton',this.checked)"/>
            Ønsker å melde anonymt
          </label>
 </div>
 <div id="anonymbutton" style="display:none" >
   <label>
            <input name="k-anonym" type="radio" id="k-ikkeanonym" value="k-ikkeanonym" onclick="toggleDisplay('kontakt1',this.checked);toggleDisplay('anonymbutton',0)"/>
            Ønsker å melde normalt
   </label><br>
 	 <button name="lagreanonymt" type="submit" class="btn btn-primary" >Lagre</button>
</div>
    
<div  class="tab-pane" id="kontakt1">
	<div class="form-group">
        <label for="k-epost">Melders epost:</label>
        <div>
          <input name="k-epost" type="email" value="${melder.melderepost}" class="form-control" id="k-epost" placeholder="Email" onblur="formSubmit();"  />
        </div>
       
      </div>
      <div class="form-group">
        <label for="k-navn">Melders navn:</label>
        <div>
          <input name="k-navn" type="text" value="${melder.meldernavn}"  class="form-control" id="k-navn" placeholder="Navn"/>
        </div>
      </div>
      <div class="form-group">
        <label for="k-helseregion">Helseregion:</label>
        <div>
        	<select name ="k-helseregion" id="k-helseregion" class="form-control" onblur="regionValgt()">
						<option selected="selected" >${melder.helseregion}</option>
			       		<#list melder.helseRegionene as helseregion>
			       				<option>${helseregion} </option>
			       		 </#list>
	     		   	</select>
<!--  
          <input name="k-helseregion" type="text" value="${melder.helseregion}" class="form-control" id="k-helseregion" placeholder="Helseregion">
-->          
        </div>
      </div>
      <div class="form-group">
        <label for="k-helseforetak">Helseforetak:</label>
        <div>
        <select name ="k-helseforetak" id="k-helseforetak" class="form-control"  onblur="foretakValgt()">
						<option selected="selected" >${melder.helseforetak}</option>
			       		<#list melder.valgtRegion as region>
			       				<option>${region} </option>
			       		 </#list>
	     		   	</select>
<!--  	     		   	
           <input name="k-helseforetak" type="text" value="${melder.helseforetak}" class="form-control" id="k-helseforetak" placeholder="Helseforetak">
-->
        </div>
      </div>
      <div class="form-group">
        <label for="k-sykehus">Institusjon/sykehus:</label>
        <div>
           <select name ="k-sykehus" id="k-sykehus" class="form-control">
						<option selected="selected" >${melder.sykehus}</option>
			       		<#list melder.valgtHFsykehus as sykehus>
			       				<option>${sykehus} </option>
			       		 </#list>
	     		   	</select>   
<!--        
          <input name="k-sykehus" type="text" value="${melder.sykehus}" class="form-control" id="k-sykehus" placeholder="Institusjon/sykehus">
 -->
        </div>
      </div>
      <div class="form-group">
        <label for="k-tlf">Telefonnummer:</label>
        <div>
          <input name="k-tlf" type="text" value="${melder.meldertlf}" class="form-control" id="k-tlf" placeholder="Telefonnummer">
        </div>
      </div>
      <div class="radio">
          <label>
            <input name="k-nymelding" type="radio" id="k-nymelding" value="ny-melding" onclick="toggleDisplay('passord-div',0)" />
            Ny melding
          </label>
      </div>
      <div class="radio">
          <label>
            <input name="k-nymelding" type="radio" id="k-oppfolging" value="oppfølgningsmelding" onclick="toggleDisplay('passord-div',this.checked)"/>
            Oppfølgningsmelding
          </label>
      </div>
      <div class="form-group" id="passord-div" style="display:none">
        <label for="k-passord">Meldingsnøkkel (ved oppfølging):</label>
        <div>
          <input name="k-passord" type="text" class="form-control" id="k-passord" placeholder="Passord">
        </div>
      </div>
		<br/>
          <button name="avbrytkontakt" type="button" class="btn btn-default"  onclick="homePage()">Avbryt</button>
      
          <button name="lagrekontakt" type="submit"  class="btn btn-primary" >Lagre</button>
		  <button type="submit" id="btnKontak" value="kontakValue"  name="formValue" class="btn btn-primary" style="display: none" > getValue </button>
		  <button type="submit" id="btnRegion" value="regionValue"  name="regionValue" class="btn btn-primary" style="display: none" > getValue </button>
		  <button type="submit" id="btnForetak" value="foretakValue"  name="foretakValue" class="btn btn-primary" style="display: none" > getValue </button>
		  <button name="lagrekontakt" id="btnleveranse" type="submit"  class="btn btn-primary" style="display: none" >getValue</button>
		  <button name="lagrekontaktb" id="btnleveranseb" type="button" onclick="document.location='leveranse.html';" style="display: none" class="btn btn-primary" >getValue</button>
</div> <!--slutt på Kontaktinformasjon-->
</form>
</div>
</body>
</html>