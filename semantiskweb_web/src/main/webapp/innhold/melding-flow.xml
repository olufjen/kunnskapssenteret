<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
		http://www.springframework.org/schema/webflow
		http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
		<!--
		<var name="meshSchema" class="edu.unc.ils.mrc.hive.api.impl.elmo.SKOSSchemeImpl"/>
		 edu.unc.ils.mrc.hive.api.impl.elmo.SKOSSchemeImpl
		<var name="person" class="no.naks.nhn.model.PersonImpl"/>
		<var name="leder" class="no.naks.nhn.model.PersonImpl"/>
		 -->
	<on-start>
	
<!--	<evaluate expression="tableWebService.initializeVocabulary()"></evaluate> 	
	<evaluate expression="tableWebService.initializeScheme()" result="conversationScope.meshConcepts">
			</evaluate>  -->	
	  
			<evaluate expression="tableWebService.collectScope()" result="conversationScope.hiveConcepts"></evaluate>	
			<evaluate expression="tableWebService.initializeMeshtree()" result="conversationScope.meshTree"></evaluate>
			<evaluate expression="tableWebService.produceTree()" result="conversationScope.modelTree"></evaluate>
	</on-start>
		<view-state id="innledning" view="home.xhtml">
			<transition on="meshdetail" to="meshdetail"/>
			<transition on="diskusjon" to="diskusjon"/>
			<transition on="kontaktinfo" to="kontaktinfo"/>
			<transition on="innledning" to="innledning"/>
		</view-state>
		<view-state id="meshdetail"  view="meshdetail.xhtml" model="modelTree">
		
			<transition on="hendelse" to="hendelse"/>
			<transition on="diskusjon" to="diskusjon"/>
			<transition on="kontaktinfo" to="kontaktinfo"/>
			<transition on="innledning" to="innledning"/>
			
		</view-state>

		
		<view-state id="hendelse"  view="hendelse.xhtml" model="modelHendelse">
	
			<transition on="hvorhvem" to="hvorhvem"/>
			<transition on="diskusjon" to="diskusjon"/>
			<transition on="kontaktinfo" to="kontaktinfo"/>
			<transition on="innledning" to="innledning"/>
	
		</view-state>
		<view-state id="diskusjon" view="diskusjon.xhtml" model="modelDiskusjon">
			<transition on="hvorhvem" to="hvorhvem"/>
			<transition on="hendelse" to="hendelse"/>
			<transition on="kontaktinfo" to="kontaktinfo"/>
			
		</view-state>
		<view-state id="kontaktinfo" view="kontaktinfo.xhtml" model="modelKontaktinfo">
	
			<transition on="hendelse" to="hendelse"/>
			<transition on="diskusjon" to="diskusjon"/>
		 	<transition on="kontroll" to="kontroll"/> 
	
		</view-state>
	 	
		<view-state id="kontroll" view="kontroll.xhtml" >
		<on-entry><evaluate expression="tableWebService.checkKontroll()" result="flowScope.modelKontroll"></evaluate></on-entry>
			<transition  on="hendelse" to="hendelse"/>
			<transition on="diskusjon" to="diskusjon"/>
			<transition on="hvorhvem" to="hvorhvem"/>
			<transition on="kontaktinfo" to="kontaktinfo"/>
			<transition on="kvittering" to="kvittering"/>
		</view-state>
		<view-state id="kvittering" view="kvittering.xhtml">
		
				<transition on="cancel" to="finish" ></transition>
		</view-state>


	<end-state id="finish"  >
		
	</end-state>
	<global-transitions >
		<transition on="cancel" to="finish" ></transition>
	</global-transitions>
</flow>